<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from www.enableds.com/products/stickymobile/light/page-vcard.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 28 Oct 2019 11:36:38 GMT -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>Market Place</title>
  <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900,900i|Source+Sans+Pro:300,300i,400,400i,600,600i,700,700i,900,900i"
    rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="styles/style.css" />
  <link rel="stylesheet" type="text/css" href="styles/framework.css" />
  <link rel="stylesheet" type="text/css" href="fonts/css/fontawesome-all.min.css" />
  <style>
    .item_style{
      margin: 10px 0px 0px 0px;
      padding-top:10px;
    }
  </style>
</head>

<body class="theme-light" data-background="none" data-highlight="red2">
  <div id="page">
    <div id="page-preloader">
      <div class="loader-main">
        <div class="preload-spinner border-highlight"></div>
      </div>
    </div>
    <div class="header header-fixed header-logo-center">
      <a href="index.html" class="header-title">MarketPlace</a>
      <a href="#" class="back-button header-icon header-icon-1"><i class="fas fa-arrow-left"></i></a>
      <a href="#" data-toggle-theme-switch class="header-icon header-icon-4"><i class="fas fa-lightbulb"></i></a>
    </div>
    <div id="footer-menu" class="footer-menu-5-icons footer-menu-style-1">
      <a href="index.html"><i class="fa fa-home"></i><span>Home</span></a>
      <a href="index-components.html"><i class="fa fa-star"></i><span>Features</span></a>
      <a href="index-pages.html" class="active-nav"><i class="fa fa-heart"></i><span>Pages</span></a>
      <a href="index-search.html"><i class="fa fa-search"></i><span>Search</span></a>
      <a href="#" data-menu="menu-settings"><i class="fa fa-cog"></i><span>Settings</span></a>
      <div class="clear"></div>
    </div>
    <div class="page-content header-clear-medium" id="expedition_container">
      <div class="search-box search-color bg-dark1-dark shadow-tiny round-huge bottom-0"
        style="width: 92%; margin-left: auto; margin-right: auto;">
        <i class="fa fa-search"></i>
        <input type="text" placeholder="Search here.." data-search="">
      </div>

      <div class="content top-20 bottom-20">
        <div class="input-style input-style-2 input-required bg-white">
          <span class="input-style-1-active input-style-1-inactive">Select a Category</span>
          <em><i class="fa fa-check color-green1-dark"></i></em>
          <select>
            <option value="default" disabled="" selected="">Select a Category</option>
            <option value="Food">Food & Beverage</option>
            <option value="Transport">Transport</option>

          </select>
        </div>
<div id = "content-holder">

</div>



        <script type="text/javascript" src="scripts/jquery.js"></script>
        <script type="text/javascript" src="scripts/plugins.js"></script>
        <script type="text/javascript" src="scripts/custom.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
      </div>

      <script>
          var username = localStorage.username;
          var age = localStorage.age;
          var email = localStorage.email;
          var mobile_number = localStorage.mobile_number;
          var userID = localStorage.userID;
          
          get_all_rewards();
          console.log(userID, username, age, email, mobile_number)

        function select_rewards(){
          console.log(event.target.id)
          window.location.href = "/reward_details.html?id=" + event.target.id
          localStorage.reward_id = event.target.id
        }

      
      function post_to_server(url_param, post_data){
        var base_url = "http://127.0.0.1:5000/" + url_param
        console.log("URL to send:" + base_url)
        console.log("Data to send: " + post_data)
        return new Promise(resolve=>{
            $.ajax({
            type : 'POST',
            url : base_url,
            data: post_data
        })
        .done(function(data) {
            console.log(data);
            resolve(data)
            });
        })
    }


        


          async function get_all_rewards(){
            let response = await post_to_server('get_rewards/')
            if (response["ERROR_CODE"] == 0)
              create_reward_item(response["DETAILS"])
          }


          function create_reward_item(rewards_list){
          for (var i = 0; i < rewards_list.length; i++)
          {
            var box = document.createElement("div")
            box.style.position = "relative"
            box.style.height = "100px"
            box.classList.add("content-boxed", "item_style")
      
            var columns = document.createElement("div")
            columns.classList.add("content", "list-columns-left")
      
            var element = document.createElement("div")
      
            var imageHolder = document.createElement("img")
            imageHolder.src = rewards_list[i]["REWARD_IMAGE"]
      
            var paragraph = document.createElement("p")
            paragraph.innerHTML = rewards_list[i]["REWARD_DESCRIPTION"]
      
            var header = document.createElement("h1")
            header.classList.add("bolder")
            header.innerHTML = rewards_list[i]["REWARD_NAME"]
            
            var overlay = document.createElement("div")
            overlay.style.height = "100%"
            overlay.style.width = "100%"
            overlay.style.position = "absolute"
            overlay.style.top = "0px"
            overlay.style.left = "0px"
            overlay.style.zIndex = "999"
            overlay.id = rewards_list[i]["REWARD_ID"]
            overlay.addEventListener("click", select_rewards)

            element.appendChild(imageHolder)
            element.appendChild(header)
            element.appendChild(paragraph)
            columns.appendChild(element)
            
            box.appendChild(columns)
            box.appendChild(overlay)
            document.getElementById("content-holder").appendChild(box)
          }
          }
        </script>
</body>

</html>